<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ZenTab Dashboard</title>
  <link rel="stylesheet" href="css/options.css">
</head>
<body>

  <!-- Navigation Rail -->
  <nav class="sidebar">
    <div class="logo">ZenTab</div>
    
    <div class="nav-links">
      <button id="nav-dashboard" class="nav-btn active" data-target="view-dashboard">
        Dashboard
      </button>
      <button id="nav-settings" class="nav-btn" data-target="view-settings">
        Settings
      </button>
    </div>
  </nav>

  <!-- Main Content Area -->
  <main class="content-area">
    
    <!-- VIEW: DASHBOARD (Saved Tabs) -->
    <section id="view-dashboard" class="view-section active">
      <div class="view-header">
        <h1>Your Workspace History</h1>
        <button id="clear-all" class="btn-delete-all">Delete Everything</button>
      </div>
      
      <div id="container"></div>
    </section>

    <!-- VIEW: SETTINGS -->
    <section id="view-settings" class="view-section" style="display:none;">
      <h1>Settings</h1>
      
      <div class="settings-grid">
        
        <!-- Column 1: Domain Filtering -->
        <div class="settings-card">
          <h3>Domain Filtering</h3>
          <p>Control which sites are allowed to be saved.</p>
          
          <div class="control-group">
            <select id="mode-select" class="mode-select">
              <option value="blacklist">Blacklist (Block Specific)</option>
              <option value="whitelist">Whitelist (Allow Specific)</option>
            </select>
            <p id="mode-desc">Only sites NOT in this list will be saved.</p>
          </div>

          <div class="add-row">
            <input type="text" id="add-input" class="input-dark" placeholder="example.com">
            <button id="add-btn" class="btn-add">+</button>
          </div>

          <input type="text" id="search-input" class="input-dark" placeholder="Search domains...">

          <div id="domain-list"></div>
        </div>

        <!-- Column 2: General & Backups -->
        <div class="right-col">
            
            <div class="settings-card">
              <h3>General</h3>
              <div class="setting-row">
                <label for="setting-favicons">Show Favicons</label>
                <input type="checkbox" id="setting-favicons">
              </div>
            </div>

            <!-- ZenTab Native Backups -->
            <div class="settings-card">
                <h3>ZenTab Backup (JSON)</h3>
                <p>Full backup including settings and timestamps.</p>

                <!-- Manual Actions -->
                <div class="backup-actions">
                    <button id="btn-export-now" class="btn-primary">
                        Download Full Backup (JSON)
                    </button>
                    
                    <div style="margin-top: 10px; display: flex; gap: 10px;">
                        <input type="file" id="import-file" accept=".json" style="display:none">
                        <button id="btn-import-trigger" class="btn-secondary">
                            Import Full Backup
                        </button>
                    </div>
                    <p id="import-status" style="font-size: 0.85em; color: var(--accent-green); display:none;"></p>
                </div>

                <hr style="border: 0; border-top: 1px solid var(--border); margin: 20px 0;">

                <!-- Automation -->
                <div class="backup-config">
                    <div class="setting-row">
                        <label for="backup-enabled">Auto-save to Downloads folder</label>
                        <input type="checkbox" id="backup-enabled">
                    </div>

                    <div id="auto-backup-options" class="auto-options">
                        <label>Frequency:</label>
                        <div class="input-group">
                            <input type="number" id="backup-val" class="input-dark small" min="0.1" step="0.1" value="1">
                            <select id="backup-unit" class="input-dark">
                                <option value="hours">Hours</option>
                                <option value="days">Days</option>
                                <option value="weeks">Weeks</option>
                            </select>
                        </div>
                        <p class="small-hint">
                            Backups will be saved to your browser's default download location.
                        </p>
                    </div>
                </div>
            </div>

            <!-- OneTab / Text Compatibility -->
            <div class="settings-card">
                <h3>Import / Export URLs</h3>
                <p>OneTab compatible. Copy/Paste a list of URLs (one per line).</p>
                
                <textarea id="onetab-io" class="input-dark" rows="6" placeholder="https://example.com | Example Title&#10;https://google.com"></textarea>
                
                <div class="backup-actions" style="margin-top:10px; display:flex; gap:10px;">
                    <button id="btn-onetab-import" class="btn-secondary" style="background-color: var(--accent-green); color: var(--bg-base); border:none;">
                        Import List
                    </button>
                    <button id="btn-onetab-export" class="btn-secondary">
                        Generate Export List
                    </button>
                </div>
                <p id="onetab-status" style="font-size: 0.85em; color: var(--text-secondary); margin-top:5px;"></p>
            </div>

        </div>

      </div>
    </section>

  </main>

  <script type="module" src="options.js"></script>
</body>
</html>